<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.amberframework.web.system.dao.UserResourcePermissionMapper" >

<resultMap type="org.amberframework.web.system.model.BaseUserResourcePermission" id="BaseMap">
  <id column="id" property="id" />
  <result column="user_Id" property="userId"/>
  <result column="resource_Id" property="resourceId"/>
  <result column="permission_Id" property="permissionId"/>
</resultMap>
 
<insert id="insertBaseUserResourcePermission" parameterType="java.util.List" >  
    INSERT INTO t_sys_user_resource_permission  
    (id,  
    user_id,
    resource_id,  
    permission_id
    ) 
   <foreach collection="list" item="item" index="index"  separator="union all">  
       SELECT  
       #{item.id},  
       #{item.userId},
       #{item.resourceId},  
       #{item.permissionId}
       FROM dual  
   </foreach>  
</insert>  

 <delete id="deleteUserResourcePermissions" parameterType="java.lang.String" >
    delete from t_sys_user_resource_permission  
    where user_id = #{userId,jdbcType=CHAR}
 </delete>
 
 <select id="getAllResourcePermissionByUserId" parameterType="java.lang.String" resultMap="BaseMap">
   select * from t_sys_user_resource_permission where user_id=#{userId}
 </select>
 
 <select id="getUPPByUserId" parameterType="java.lang.String" resultType="java.lang.String">
   select resource_id from t_sys_user_resource_permission where user_id=#{userId}
 </select>
 
</mapper>