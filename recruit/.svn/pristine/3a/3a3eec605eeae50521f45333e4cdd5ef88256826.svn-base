//简历预览设置数据
setdata(window.dialogArguments);
function setdata(d) {
	//基本信息的页面的预览
    previewBasicInfo(d);	
	//简历信息预览的页面
	initPage(d);
	//工作经验预览
	previewWorkExperience(d);
	
	//教育经历预览
	previewEducationExperience(d);
	
	//语言信息预览
	previewLanguage(d);
	
	//技能信息预览
	previewSkill(d);
}

function previewBasicInfo(d){
	var data = {
			name:d.name,
			sex : d.sex,
			sexName:d.sexName,
			brithday:d.birthday,
			marriage:d.maritalStatus,
			marriageName:d.maritalName,
			residency:d.residence,
			workYears:d.workYears,
			alternativePhone:d.phoneReseave,
			phone:d.phone,
			email:d.email,
			address:d.address,
			ethnic:d.nation,
			IDNumber:d.idNumber,
			IDAddress:d.idAddress
	}
	var htm = writeBasicInfoHtml(data);
	$(".basicInfoData").html(htm);
	$(".basicinfoShow").show();
}

function initPage(d){
	//背景信息
	if($.trim(d.selfEvaluation) !=""){
		$("#showSelfEvaluationItem").click();
		$("#divEditSelfEvaluation").html(d.selfEvaluation);
	}
	//求职意向
	if($.trim(d.careerObject)!=""){
		$("#showCareerObjectItem").click();
		$("#divEditCareerObject").html(d.careerObject);
	}
	//奖励信息
	if($.trim(d.awardInfo) !=""){
		$("#showRewardsItem").click();
		$("#divEditRewards").text(d.awardInfo);
	}
	//证书信息
	if($.trim(d.certificateInfo) !=""){
	    $("#showCertificationItem").click();
	    $("#divEditCertification").text(d.certificateInfo);
	}
	//详细工作经历
	if($.trim(d.experienceDetail) !=""){
		$("#showWorkDetailsItem").click();
		$("#divEditExperienceDetail").text(d.experienceDetail);
		
	}
	//爱好信息
	if($.trim(d.hobbyInfo) !=""){
		$("#showHobbiesItem").click();
		$("#divEditHobbies").text(d.hobbyInfo);
	}
	//语言描述信息
	if($.trim(d.languageSkill) !=""){
		$("#showLanguageSkillItem").click();
		$("#divEditLanguageSkill").text(d.languageSkill);
		
	}
	//项目经验
	if($.trim(d.projectExperience) !=""){
		$("#showProjectExperienceItem").click();
		$("#divEditProjectExperience").text(d.projectExperience);
	}
	//其他技能信息
	if($.trim(d.skillText) !=""){
		$("#showSkillTextItem").click();
		$("#divEditSkillText").text(d.skillText);
		
	}
	//培训信息
	if($.trim(d.trainInfo) !=""){
		$("#showTrainingInfoItem").click();
		$("#divEditTrainingInfo").text(d.trainInfo);
	}
	//工作经验
	if($.trim(d.companys)!=""){
		$("#showWorkItem").click();
    }
	//教育经历   
	if($.trim(d.degreeName)!="" && $.trim(d.graduationSchool)!="" && $.trim(d.professional)!=""){
		$("#showEduItem").click();
	}
	//技能:

	if($.trim(d.skillInfo) !="" && $.trim(d.rank)!=""){
		$("#showSkillItem").click();
	}
	//语言
	if($.trim(d.languageName)!=""){
		$("#showLangItem").click();
	}
}

//切割工作经历的字符数据
function splitWorkExperienceInfo(d){
	var company = d.companys.split(",");
	var expStartDate = d.expStartDates.split(",");
	var expEndDate = d.expEndDates.split(",");
	var industryBtn =  d.industries.split(",");
	var roleName = d.roleNames.split(",");
	var locationBtn = d.locations.split(",");
	var companyTypeId = d.companyTypeIds.split(",");
	var companyTypeName = d.companyTypeName.split(",");
	var responsibility = d.responsibilitys.split(",");
	var reportObject = d.reportObjects.split(",");
	var subordinate = d.subordinates.split(",");
	var salary = d.salary.split(",");
	var currencyType = d.currencyTypes.split(",");
	var currencyTypeName = d.currencyTypeName.split(",");
	var achievement = d.achievements.split(",");
	var data = {
			company:company,
			expStartDate:expStartDate,
			expEndDate:expEndDate,
			industryBtn:industryBtn,
			roleName:roleName,
			locationBtn:locationBtn,
			roleName:roleName,
			locationBtn:locationBtn,
			companyTypeName:companyTypeName,
			responsibility:responsibility,
			reportObject:reportObject,
			subordinate:subordinate,
			salary:salary,
			currencyTypeName:currencyTypeName,
			achievement:achievement
	}
	return data;
}

//预览工作经历
function previewWorkExperience(d){
	var data = splitWorkExperienceInfo(d);
	for(var i=0;i<data.company.length-1;i++){
		var experience = {
				company:data.company[i],
				expStartDate:data.expStartDate[i],
				expEndDate:data.expEndDate[i],
				industryBtn:data.industryBtn[i],
				roleName:data.roleName[i],
				locationBtn:data.locationBtn[i],
				responsibility:data.responsibility[i],
				reportObject:data.reportObject[i],
				subordinate:data.subordinate[i],
				salary:data.salary[i],
				currencyTypeName:data.currencyTypeName[i],
				achievement:data.achievement[i]
		}
		var htm =  writeWorkExperienceHtml(experience);
		$(".workConData").append(htm);
	}
}

//切割学历的字符数据
function splitEducationExperienceInfo(d){
	var startYearMonth = d.startYearMonth.split(",") ;
	var endYearMonth=d.endYearMonth.split(",") ;
	var degreeName=d.degreeNameShow.split(",") ;
	var schoolName=d.graduationSchool.split(",") ;
	var majorName=d.professional.split(",") ;
	var data = {
			startYearMonth:startYearMonth,
			endYearMonth:endYearMonth,
			degreeName:degreeName,
			schoolName:schoolName,
			majorName:majorName
	}
	return data;
}
//预览学历信息
function previewEducationExperience(d){
	var data = splitEducationExperienceInfo(d);
	for(var i=0;i<data.degreeName.length-1;i++){
		var educationExperience = {
				startYearMonth : data.startYearMonth[i],
				endYearMonth : data.endYearMonth[i],
				degreeName : data.degreeName[i],
				schoolName : data.schoolName[i],
				majorName : data.majorName[i],
				degreeId:"1",
		}
		var htm = writeEducationHtml(educationExperience);
		//展示后的相关操作的控制
		$(".educationExperience").append(htm);
	}
}

//切割语言信息的字符数据
function splitLanguageData(d){
	var languageName = d.language.split(",");
	var languageLevelName=d.languageLevelName.split(",");
	var oralLevelName = d.oralLevelName.split(",");
	
	var data = {
			languageName:languageName,
			languageLevelName:languageLevelName,
			oralLevelName:oralLevelName
	}
	return data;
}


//预览语言信息
function previewLanguage(d){
	var data = splitLanguageData(d);
	for(var i=0;i<data.languageName.length-1;i++){
		var languageData = {
				languageName:data.languageName[i],
				languageLevelName:data.languageLevelName[i],
				oralLevelName:data.oralLevelName[i],
				languageId:"1",
				languageLevelId:"1",
				oralLevelId:"1"
		}
		var htm = writeLanguageHtml(languageData);
		$(".languageList").append(htm);
	}
}

function splitSkillData(d){
	var skillInfo = d.skillInfo.split(",");
	var rankName = d.rankName.split(",");
	
    var data = {
    		skillInfo:skillInfo,
    		rankName:rankName
    }
    return data;
}

//预览技能信息
function previewSkill(d){
	var data = splitSkillData(d);
	for(var i=0;i<data.skillInfo.length-1;i++){
		var skillData = {
				skill:data.skillInfo[i],
				levelId:"1",
				levelName:data.rankName[i]
		}
		htm = writeSkillHtml(skillData);
		$("#skillData").append(htm);
		
	}
}
$(".record").die();