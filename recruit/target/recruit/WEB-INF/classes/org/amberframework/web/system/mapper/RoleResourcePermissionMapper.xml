<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.amberframework.web.system.dao.RoleResourcePermissionMapper" >

<resultMap type="org.amberframework.web.system.model.RoleResourcePermission" id="BaseMap">
  <id column="id" property="id" />
  <result column="role_Id" property="roleId"/>
  <result column="resource_Id" property="resourceId"/>
  <result column="permission_Id" property="permissionId"/>
</resultMap>
 
 <select id="getPPIDByRoleId" parameterType="java.lang.String" resultMap="BaseMap">
   select id,resource_id,permission_id from t_sys_role_resource_permission  where role_id=#{roleId} and flag='0'
 </select>
 
<insert id="insertRoleResourcePermissions" parameterType="java.util.List" >  
    INSERT INTO t_sys_role_resource_permission  
    (id,  
    role_id,
    resource_id,  
    permission_id,
    flag) 
   <foreach collection="list" item="item" index="index"  separator="union all">  
       SELECT  
       #{item.id},  
       #{item.roleId},
       #{item.resourceId},  
       #{item.permissionId},
       #{item.flag}  
       FROM dual  
   </foreach>  
</insert>  

 <delete id="deleteRoleResourcePermissions" parameterType="java.lang.String" >
    delete from t_sys_role_resource_permission  
    where role_id = #{0,jdbcType=VARCHAR}and flag=#{1,jdbcType=CHAR}
  </delete>
 
</mapper>